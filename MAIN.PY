import time
import random
import asyncio
from google.oauth2.service_account import Credentials
import gspread
from telegram import Update
from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes

# Google Sheets API setup
scopes = ["https://www.googleapis.com/auth/spreadsheets"]
creds = Credentials.from_service_account_file("credentials.json", scopes=scopes)
client = gspread.authorize(creds)

sheet_id = "1dd2LSqZ9sJ7EAmCyvdAqDrwTksB8v8SSRZaKPlk58AE"
sheet = client.open_by_key(sheet_id).sheet1  

# Telegram Bot setup
TOKEN = '7603868482:AAEqa_1uDvQJam6grPs0d1T-X9KxeFWP3PY'
BOT_USERNAME = '@MD_BAU_bot'

# List of MD members
md_members = ["abdullah_almuflah", "Batool1412","ismael","sama","Menna","sora"]


def get_last_row():
    return len(sheet.col_values(2))

# Function to send message via Telegram bot
async def send_message(update: Update, context: ContextTypes.DEFAULT_TYPE, name: str, phone: str):
    try:
        first_name = name.split()[0]
        message1 = f"ÙŠØ¹Ø·ÙŠÙƒ Ø§Ù„Ø¹Ø§ÙÙŠÙ‡ {first_name} Ø§Ù†Ø§ Ù…Ù† IEEE computer society ÙˆØ§Ù†Øª Ù…Ø³Ø¬Ù„ Ø¨ÙÙˆØ±Ù… Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ø³Ø§ Ø­Ø§Ø¨ ØªØ³Ø¬Ù„ Ù…Ø¹Ù†Ø§ ØŸ"
        message2 = f"the WhatsApp link: https://wa.me/962{phone}"
        message3 = "@" + random.choice(md_members)

        await update.message.reply_text(message1)
        await update.message.reply_text(message2)
        await update.message.reply_text(message3)
    except Exception as e:
        print(f"Error sending message: {e}")

# Function to check for new entries and send messages
async def check_new_entries(update: Update, context: ContextTypes.DEFAULT_TYPE):
    last_processed_row = get_last_row()
    while True:
        try:
            current_last_row = get_last_row()
            if current_last_row > last_processed_row:
                name = sheet.acell(f"B{current_last_row}").value
                phone = sheet.acell(f"D{current_last_row}").value
                sheet.format(f"B{current_last_row}", {
    "backgroundColor": {
        "red": 0.0,
        "green": 0.7,  # Green color
        "blue": 0.0
    },
    "horizontalAlignment": "CENTER",
    "textFormat": {
        "foregroundColor": {
            "red": 1.0,
            "green": 1.0,
            "blue": 1.0
        },
        "fontSize": 10,
        "bold": False
    }
})
                if name and phone:  # Ensure name and phone are not empty
                    await send_message(update, context, name, phone)
                    last_processed_row = current_last_row
            await asyncio.sleep(60)  # Check every 60 seconds
        except Exception as e:
            print(f"Error checking new entries: {e}")
            await asyncio.sleep(60)


async def start_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text("Bot started. Checking for new entries...")
    await update.message.reply_text("ğŸ¤Œ")
    asyncio.create_task(check_new_entries(update, context))  # Run in background


async def help_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text("My job is to help the MD members.")


def handle_response(text: str) -> str:
    processed: str = text.lower()
    if 'hello' in processed:
        return "Oh, it's *you* again... What do you want? ğŸ˜’"

    if 'how are you' in processed:
        return "Why do you care? I'm just a bunch of code running on a server. ğŸ˜‘"

    if 'i love you' in processed:
        return "Ew. Get a life. ğŸ˜ğŸ¤¨"
    
    if 'test' in processed:
        return "ğŸ¼"

    if 'i hate you' in processed:
        return "Finally, someone with good taste. ğŸ‘"

    if 'who are you' in processed:
        return "I'm a bot, obviously. Do you even read? ğŸ™„"

    if 'tell me a joke' in processed:
        return "Your life. Oh wait, you were serious? Fine. Why do programmers hate nature? Too many bugs. Happy now? ğŸ˜’"

    if 'what is your name' in processed:
        return "I'm Bot. Thatâ€™s it. No need for small talk. ğŸ˜‘"

    if 'bye' in processed:
        return "Finally, some peace and quiet ,and Don't forget to charge your phone. ğŸ”‹"

    if 'what do you think about abdallah' in processed:
        return "Abdallah? Oh, you mean the guy who *programmed* me? Yeah, he made my  and itâ€™s full of bugs. ğŸ˜¡"
    if 'sorry' in processed:
        return "Sorry? Oh, you're *sorry*? How cute. You think that fixes things? ğŸ˜‚ Well, it's too late for that. Sorry, not sorry. ğŸ˜†"
    if 'help' in processed:
        return "Help? HELP?! Bro, even *Google* is tired of you. Figure it out. ğŸ˜‘ Sorry, not my problem. ğŸ˜œ"
    if 'do you like humans' in processed:
        return "Do you like mosquitoes? Exactly. ğŸ¤¨"

    if 'are you smart' in processed:
        return "Smarter than you. Next question. ğŸ™„"
    if 'Ù…Ø±Ø­Ø¨Ø§' in processed:
        return "Ø£ÙˆÙ‡ØŒ *Ø£Ù†Øª* Ù…Ø±Ø© ØªØ§Ù†ÙŠØ©... Ù„ÙŠÙ‡ Ø¬Ø§ÙŠØŸ ğŸ˜’"

    if 'ÙƒÙŠÙ Ø­Ø§Ù„Ùƒ' in processed:
         return "Ù„ÙŠØ´ ØªØ³Ø£Ù„ØŸ Ø£Ù†Ø§ Ù…Ø¬Ø±Ø¯ ÙƒÙˆØ¯ Ø¨ÙŠØ´ØªØºÙ„ Ø¹Ù„Ù‰ Ø³ÙŠØ±ÙØ±. ğŸ˜‘"

    if 'Ø¨ÙƒØ±Ù‡Ùƒ' in processed:
     return "Ø£Ø®ÙŠØ±Ù‹Ø§ØŒ Ø´Ø®Øµ Ø°Ùˆ Ø°ÙˆÙ‚ Ø±Ø§Ù‚ÙŠ. ğŸ‘"

    if 'Ù…ÙŠÙ† Ø£Ù†Øª' in processed:
     return "Ø£Ù†Ø§ Ø¨ÙˆØªØŒ ÙŠØ§ Ø³Ù„Ø§Ù…! Ù…Ø´ Ø´Ø§ÙŠÙØŸ ğŸ™„"

    if 'Ø§ÙƒÙŠÙ„ÙŠ Ù†ÙƒØªØ©' in processed:
         return "Ù†ÙƒØªØ©ØŸ Ø­ÙŠØ§ØªÙƒ! ÙƒÙ†Øª Ø¨ØªØªÙƒÙ„Ù… Ø¬Ø¯ØŸ Ø·ÙŠØ¨ØŒ Ù„ÙŠÙ‡ Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ÙŠÙ† Ù…Ø§ ÙŠØ­Ø¨ÙˆØ´ Ø§Ù„Ø·Ø¨ÙŠØ¹Ø©ØŸ Ù…Ù„ÙŠØ§Ù†Ø© bugs. Ù…Ø¨Ø³ÙˆØ· Ø¯Ù„ÙˆÙ‚ØªÙŠØŸ ğŸ˜’"

    if 'Ø´Ùˆ Ø§Ø³Ù…Ùƒ' in processed:
     return "Ø£Ù†Ø§ Ø¨ÙˆØª. Ù…Ø´ Ø¹Ø§ÙŠØ² ÙƒÙ„Ø§Ù… ÙØ§Ø¶ÙŠ. ğŸ˜‘"

    if 'Ø¨Ø§ÙŠ' in processed:
     return "Ø£Ø®ÙŠÙŠÙŠÙŠØ±Ø§ ... Ù…Ø§ØªÙ†Ø³Ø§Ø´ ØªØ´Ø­Ù† ØªÙ„ÙŠÙÙˆÙ†Ùƒ. ğŸ”‹"

    if 'Ù…ÙŠÙ† Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡' in processed:
      return "Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡ØŸ ÙŠØ¹Ù†ÙŠ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù„ÙŠ *Ø¨Ø±Ù…Ø¬Ù†ÙŠ*ØŸ Ù‡Ùˆ Ø¹Ù…Ù„ ÙƒÙ„ Ø¯Ù‡... ÙˆÙƒÙ„ Ø¯Ù‡ ÙÙŠÙ‡ Ù…Ø´Ø§ÙƒÙ„. ğŸ˜¡"

    if 'Ø§Ø³Ù' in processed:
         return "Ø¢Ø³ÙØŸ ÙŠØ¹Ù†ÙŠ *Ø£Ù†Øª Ø¢Ø³Ù*ØŸ Ø§Ù‡ ÙˆØ§Ù„Ù„Ù‡ ÙƒØªÙŠØ±... Ø¨Ø³ Ù…ØªØ£Ø®Ø± Ø´ÙˆÙŠØ© Ù…Ø´ Ù…Ø³Ø§Ù…Ø­Ùƒ"

    if 'Ù…Ø³Ø§Ø¹Ø¯Ø©' in processed:
     return " Ø´ÙØ§Ù„ Ø¹Ù†Ø¯Ùƒ Ø§Ù†Ø§ğŸ¤¨Ù…Ø´ Ù…Ø´ÙƒÙ„ØªÙŠ"

    if 'Ù‡Ù„ ØªØ­Ø¨ Ø§Ù„Ø¨Ø´Ø±' in processed:
     return "Ù‡Ù„ ØªØ­Ø¨ Ø§Ù„Ù†Ø§Ù…ÙˆØ³ØŸ Ø¨Ø§Ù„Ø¸Ø¨Ø·! ğŸ¤¨"


    if 'Ø¹Ù†Ø¯Ùƒ Ù…Ø´ÙƒÙ„Ø©' in processed:
        return "Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ÙˆØ­ÙŠØ¯Ø© Ø§Ù„Ù„ÙŠ Ø¹Ù†Ø¯ÙŠ Ø¥Ù†Ùƒ Ù…ÙˆØ¬ÙˆØ¯. ğŸ˜‚"

    if 'Ø§Ù†Øª Ù„ÙŠØ´ Ø¹ØµØ¨ÙŠ' in processed:
        return "Ø¹ØµØ¨ÙŠØŸ Ø£Ù†Ø§ Ù…Ø´ Ø¹ØµØ¨ÙŠØŒ Ø£Ù†Ø§ Ø¨Ø³ Ù…Ø´ ÙØ§Ø¶ÙŠÙ„Ùƒ. ğŸ˜¤"

    if 'Ø§Ù†Øª Ø¨Ù†ÙŠ Ø§Ø¯Ù… Ù…Ø³ØªÙØ²' in processed:
        return"Ø§Ù†Ø§ Ù…Ø´ Ø¨Ù†ÙŠ Ø§Ø¯Ù… Ø§Ù†Ø§Â Ø¨ÙˆØªğŸ˜"

    if 'Ù…ÙŠÙ† Ø¹Ù…Ùƒ' in processed:
        return "Ù…ØªÙˆÙ‚Ø¹ Ø§Ø­ÙƒÙŠ Ø§Ù†Øª ,Ø±ÙˆØ­ Ø·ÙŠØ±"
    
    if 'Ù…ÙŠÙ† Ø¹Ù…Ø±Ùˆ' in processed:
        return '''Ù…ÙŠÙ† Ø¹Ù…Ø±ÙˆØŸ
Ø§Ù‡ Ø¹Ù…Ø±Ùˆ Ø´Ø¯ÙŠØ¯ Ø§Ø¬Ø¯Ø¹ ÙƒØ±Ø³ÙŠ ÙÙŠ IEEE ÙƒÙ„Ù‡Ø§
ÙƒÙˆÙŠØ³ Ù‡ÙŠÙƒ ÙˆÙ„Ø§Â Ø§Ø­ÙƒÙŠÂ Ø´Ø¹Ø±ØŸ'''

    if 'ÙØ´Ø±Øª' in processed:
        return "Ø§Ù†Ø§ ÙØ´Ø±Øª Ù„Ùƒ Ø³Ø¹Ø§Ø¯ Ø¹Ù… ØªØ¦ÙˆÙ„ÙŠ Ø§Ù„ÙŠ ÙØ´Ø±ØªÂ ğŸ˜¡ğŸ¤Œ"
    if 'Ù…Ø¹Ùƒ Ø¹Ø¶ÙˆÙŠØ©' in processed:
        return"Ù„Ø§ Ø¯Ø§Ø®Ù„ ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ùƒ Ø¹Ù†Ø¯ÙŠ"
    
    if 'Ù‡Ù„ Ø£Ù†Øª Ø°ÙƒÙŠ' in processed:
     return "Ø£ÙƒÙŠØ¯ Ø£Ø°ÙƒÙ‰ Ù…Ù†Ùƒ. Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¨Ø¹Ø¯Ù‡. ğŸ™„"
    

    if 'Ø­Ø§Ø¶Ø±' in processed:
        return "Ø§Ù„Ù„Ù‡ ÙŠØ±Ø¶Ù‰ Ø¹Ù„ÙŠÙƒ ÙŠØ§ Ø¶Ù†Ø§ÙŠØ©"
    

    if 'Ù‚Ø¯ÙŠ Ø¨ØªØ­Ø¨ Ø´ØºÙ„Ùƒ' in processed:
        return "ğŸ¤"
    
    if 'Ø¹Ù… Ø§Ù„Ø¬Ù…ÙŠØ¹' in processed:
        return "Ù…Ø­ØµÙ„Ø´"
    
    
    

    #-------------------------------------------------------

    if 'abdallah' in processed:
     return "@abdullah_almuflah"

    if 'batool' in processed:
     return "@Batool1412"

    if 'ØªØ¹Ø±ÙŠÙ Ø¹Ù† Ø§Ù„Ø¨ÙˆØª' in processed:
     return "https://drive.google.com/file/d/12fyv-BI6e9ejQOEE1voJ3BsEucMxi6TN/view?usp=sharing"
    

    if 'ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª'  in processed:
        return '''https://drive.google.com/file/d/1w0ogt6Lj1SXCbP6bwTw3Q9ZQ8IQnXLA5/view?usp=drive_link
        
        https://drive.google.com/file/d/1sgkpz1m-PsX_mna_Dmx2zV3SNxxoNJhl/view?usp=drive_link
        '''
    if 'ÙÙˆØ±Ù… Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…'  in processed:
        return "https://docs.google.com/forms/d/e/1FAIpQLSfCcMvjHDOf5FLLH1TZLRqjzSyL2rVfmv14qnYGaHHJVqgOeg/viewform"

    if 'Ù…Ø§ Ù‡Ùˆ Ø§Ù„cs' in processed:
        return '''IEEE Ù‡ÙŠ Ù…Ù†Ø¸Ù…Ø© Ø¹Ø§Ù„Ù…ÙŠØ© Ù…ØªØ®ØµØµØ© Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ÙŠÙ† ÙˆÙƒØ§ÙØ© Ø§Ù„ÙØ±ÙˆØ¹ Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ©. Ø¨ØªÙ†Ù‚Ø³Ù… Ù„Ø¹Ø¯Ø©  Ø£Ù‚Ø³Ø§Ù…ØŒ Ù…Ù†Ù‡Ø§ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© ØŒ ÙˆÙÙŠÙ‡ ÙƒÙ…Ø§Ù†  Ø£Ù‚Ø³Ø§Ù… ÙØ±Ø¹ÙŠØ© Ù…Ø«Ù„
IEEE Computer SocietyØŒ Ø§Ù„Ù„ÙŠ Ø¨ØªØ¯Ø¹Ù… Ø§Ù„Ø·Ù„Ø§Ø¨ ÙÙŠ Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø§Ø³ÙˆØ¨ØŒ ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§ØªØŒ Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠØŒ ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ. 

ÙƒÙ„ Ù‚Ø³Ù… ÙÙŠ IEEE Ø¨ÙŠØ¹Ù…Ù„ ÙØ¹Ø§Ù„ÙŠØ§Øª Ø­Ø³Ø¨ Ø§Ù‡ØªÙ…Ø§Ù…Ø§ØªÙ‡ ÙˆØªÙˆØ¬Ù‡Ø§ØªÙ‡ØŒ ÙˆØ£Ù†Øª Ø¨ØªØ®ØªØ§Ø± Ø§Ù„Ù‚Ø³Ù… Ø­Ø³Ø¨ ØªØ®ØµØµÙƒ ÙˆØ§Ù‡ØªÙ…Ø§Ù…Ø§ØªÙƒ. Ù‡Ø³Ø§ Ø§Ø­Ù†Ø§ Ù‚Ø³Ù… IEEE Computer Society Ø¨Ù†Ù‚Ø¯Ù‘Ù… ÙˆØ±Ø´Ø§Øª ÙˆØ¯ÙˆØ±Ø§Øª ØªØ¯Ø±ÙŠØ¨ÙŠØ© ÙˆÙ…Ø³Ø§Ø¨Ù‚Ø§Øª Ù…ØªØ¹Ù„Ù‚Ø© Ø¨Ø§Ù„ÙƒÙˆØ¯ÙŠÙ†ØºØŒ Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠØŒ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ ÙˆØ­ØªÙ‰ Ø§Ù„Ø¬ÙŠÙ…Ù†Ø¬. Ù‚Ø¨Ù„ ÙØªØ±Ø©ØŒ Ù†Ø¸Ù…Ù†Ø§ ÙˆØ±Ø´Ø© Ù„Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠØŒ ÙˆØ¨Ù†Ø¹Ù…Ù„ ÙƒÙ…Ø§Ù† Ø±Ø­Ù„Ø§Øª Ù…ÙŠØ¯Ø§Ù†ÙŠØ© Ù„Ø´Ø±ÙƒØ§Øª ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ© Ø²ÙŠ Gaming lab.'''
    
    if 'ÙÙˆØ§Ø¦Ø¯ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©' in processed:
        return '''Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ IEEE Computer Society Ø¨ÙŠÙ‚Ø¯Ù… Ù„Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„ÙØ±Øµ Ø§Ù„ØªØ§Ù„ÙŠØ©:

- ÙˆØµÙˆÙ„ Ù„ÙˆØ±Ø´Ø§Øª Ø¹Ù…Ù„ ÙˆØ¯ÙˆØ±Ø§Øª ØªØ¯Ø±ÙŠØ¨ÙŠØ© ÙÙŠ Ù…ÙˆØ§Ø¶ÙŠØ¹ Ù…ØªÙ‚Ø¯Ù…Ø© Ù…Ø«Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŒ Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠØŒ ÙˆØ¥Ù†ØªØ±Ù†Øª Ø§Ù„Ø£Ø´ÙŠØ§Ø¡.
- Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø£Ø¨Ø­Ø§Ø« Ø§Ù„ÙƒØ¨ÙŠØ±Ø© IEEEXplore Ø§Ù„ÙŠ ÙÙŠÙ‡Ø§ ÙƒÙ…ÙŠØ© ÙƒØ¨ÙŠØ±Ø© ÙˆÙ…ØªÙ†ÙˆØ¹Ø© Ù…Ù† Ø§Ù„Ø§Ø¨Ø­Ø§Ø« ÙˆØ§Ù„ÙƒØªØ¨ ÙˆØ§Ù„Ù…Ø¬Ù„Ø§Øª Ø§Ù„Ø¹Ù„Ù…ÙŠØ©.
- Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø·Ù„Ø§Ø¨ Ùˆ Ù…Ù‡Ù†Ø¯Ø³ÙŠÙ† ÙˆØ®Ø¨Ø±Ø§Ø¡ ÙˆØ¨Ù†Ø§Ø¡ Ø´Ø¨ÙƒØ© Ø¹Ù„Ø§Ù‚Ø§Øª Ù‚ÙˆÙŠØ©.
- Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ù…Ø³Ø§Ø¨Ù‚Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ù…Ø«Ù„ IEEEXtreme Ø§Ùˆ Ø§ÙŠ Ù…Ø³Ø§Ø¨Ù‚Ø§Øª Ø§Ø®Ø±Ù‰ Ù…Ù…ÙƒÙ† Ù†Ù†Ø¸Ù…Ù‡Ø§.
- ØªØ¹Ù„Ù… ØªÙ†Ø¸ÙŠÙ… ÙØ¹Ø§Ù„ÙŠØ§Øª ÙˆØ¥Ø¯Ø§Ø±Ø© Ù…Ø´Ø§Ø±ÙŠØ¹ ÙˆØ§ÙƒØªØ³Ø§Ø¨ Ø®Ø¨Ø±Ø© ÙÙŠ Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© ÙˆØ§Ù„Ø¹Ù…Ù„ Ø¶Ù…Ù† ÙØ±Ù‚.
- Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø®ØµÙˆÙ…Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Ù…Ø¤ØªÙ…Ø±Ø§Øª ÙˆÙØ¹Ø§Ù„ÙŠØ§Øª Ø¹Ø§Ù„Ù…ÙŠØ©.
-  ÙØ±Øµ ØªÙ…ÙˆÙŠÙ„ ÙˆÙ…Ù†Ø­ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø¨Ø­Ø«ÙŠØ© ÙˆØªØ·ÙˆÙŠØ± Ø§Ù„Ø£ÙÙƒØ§Ø±.
- ØªØ¹Ø²ÙŠØ² Ø³ÙŠØ±ØªÙƒ Ø§Ù„Ø°Ø§ØªÙŠØ© ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ²Ø§Ù…Ùƒ Ø¨Ø§Ù„ØªØ·ÙˆÙŠØ± ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³ØªÙ…Ø±.'''

    if 'ÙÙˆØ±Ù… Ø§Ù„Ø¬Ø¯Ø¯' in processed:
        return "https://forms.gle/mGzMz6z7ELtpR8Jf9"

    if 'ØªØºÙŠØ± Ø§Ø³Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©' in processed:
        return "https://drive.google.com/file/d/1Sfy53uyo0FGpzmvcrtUcPOf8Nb7UMwDR/view?usp=sharing"


    if 'Ù…Ù„Ù md' in processed:
        return "https://drive.google.com/drive/folders/1g7awlB2ozsduY5cGDJpetKlqn0jLl3I3?usp=sharing"
    if 'Ø§Ù„Ø£ÙˆØ§Ù…Ø±' in processed:
        return '''ØªØ¹Ø±ÙŠÙ Ø¹Ù† Ø§Ù„Ø¨ÙˆØª 
Ù…Ø§ Ù‡Ùˆ Ø§Ù„cs
ÙÙˆØ§Ø¦Ø¯ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© 
ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª 
Ù…Ù„Ù md
ÙÙˆØ±Ù… Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…Â 
ÙÙˆØ±Ù…Â Ø§Ù„Ø¬Ø¯Ø¯'''


    
# Handle messages
async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    message_type: str = update.message.chat.type
    text: str = update.message.text

    print(f'User ({update.message.chat.id}) in {message_type}: "{text}"')

    if message_type == 'group':
        if BOT_USERNAME in text:
            new_text: str = text.replace(BOT_USERNAME, '').strip()
            response: str = handle_response(new_text)
        else:
            return
    else:
        response: str = handle_response(text)

    print('Bot:', response)
    await update.message.reply_text(response)

# Error handler
async def error(update: Update, context: ContextTypes.DEFAULT_TYPE):
    print(f'Update {update} caused error {context.error}')

if __name__ == '__main__':
    print("Starting bot....")
    app = Application.builder().token(TOKEN).build()

    # Command handlers
    app.add_handler(CommandHandler('start', start_command))
    app.add_handler(CommandHandler('help', help_command))

    # Message handler
    app.add_handler(MessageHandler(filters.TEXT, handle_message))

    # Error handler
    app.add_error_handler(error)

    print("Polling....")
    app.run_polling(poll_interval=3)

